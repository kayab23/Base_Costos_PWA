Could not find platform independent libraries <prefix>
INFO:     Will watch for changes in these directories: ['C:\\Users\\FernandoOlveraRendon\\Documents\\Base_Costos']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [22792] using WatchFiles
Could not find platform independent libraries <prefix>
Process SpawnProcess-1:
Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\multiprocessing\process.py", line 320, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\server.py", line 71, in serve
    await self._serve(sockets)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\importer.py", line 22, in import_from_string
    raise exc from None
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\importlib\__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1398, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1371, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1342, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 938, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 759, in exec_module
  File "<frozen importlib._bootstrap>", line 491, in _call_with_frames_removed
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\app\main.py", line 18, in <module>
    from .routes import catalog, pricing, auth, autorizaciones, pdf
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\app\routes\pdf.py", line 13, in <module>
    from app.db.sequences import get_next_quote_numbers
ModuleNotFoundError: No module named 'app.db.sequences'; 'app.db' is not a package
WARNING:  WatchFiles detected changes in 'app\db\__init__.py'. Reloading...
 Could not find platform independent libraries <prefix>
INFO:     Started server process [25616]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app\db\__init__.py'. Reloading...
 INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [25616]
Could not find platform independent libraries <prefix>
INFO:     Started server process [7712]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:63876 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:54392 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:57295 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57295 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57295 - "OPTIONS /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57295 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57295 - "OPTIONS /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57295 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57295 - "OPTIONS /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
INFO:     127.0.0.1:57295 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56152 - "OPTIONS /api/clientes?q=cl&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56152 - "GET /api/clientes?q=cl&limit=10 HTTP/1.1" 404 Not Found
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:53549 - "OPTIONS /catalog/productos HTTP/1.1" 200 OK
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:63676 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:53549 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:63100 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:63100 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:63100 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:63100 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
INFO:     127.0.0.1:63100 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57681 - "OPTIONS /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57681 - "GET /api/clientes?q=cli&limit=10 HTTP/1.1" 404 Not Found
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:65489 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:58217 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:63509 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:63510 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:60604 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:60604 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:60604 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:49695 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49695 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49695 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49695 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
INFO:     127.0.0.1:49695 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60153 - "GET /api/clientes?q=cli&limit=10 HTTP/1.1" 404 Not Found
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55761 - "GET /api/clientes?q=cli&limit=10 HTTP/1.1" 404 Not Found
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57942 - "OPTIONS /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57942 - "GET /api/vendedores?q=ve&limit=10 HTTP/1.1" 404 Not Found
WARNING:  WatchFiles detected changes in 'app\main.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     Shutting down
INFO:     127.0.0.1:53018 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Waiting for connections to close. (CTRL+C to force quit)
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7712]
Could not find platform independent libraries <prefix>
WARNING:  WatchFiles detected changes in 'Scripts\test_clientes.py', 'app\main.py'. Reloading...
 INFO:     Started server process [10300]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 132, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 701, in lifespan
    await receive()
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

Could not find platform independent libraries <prefix>
INFO:     Started server process [29652]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'Scripts\test_clientes.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     Shutting down
INFO:     127.0.0.1:64857 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Waiting for connections to close. (CTRL+C to force quit)
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [29652]
Could not find platform independent libraries <prefix>
INFO:     Started server process [6852]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64860 - "GET /api/clientes?q=IMSS HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:64223 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:52002 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:60448 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60448 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60448 - "OPTIONS /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60448 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60448 - "OPTIONS /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60448 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60448 - "OPTIONS /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
INFO:     127.0.0.1:60448 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50282 - "OPTIONS /api/clientes?q=cl&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50282 - "GET /api/clientes?q=cl&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61790 - "GET /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54257 - "OPTIONS /pricing/listas?sku=1199-00046-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54257 - "GET /pricing/listas?sku=1199-00046-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62816 - "OPTIONS /cotizacion/pdf HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62816 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     Shutting down
INFO:     127.0.0.1:65268 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Waiting for connections to close. (CTRL+C to force quit)
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [6852]
Could not find platform independent libraries <prefix>
INFO:     Started server process [12680]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO-2', 'numero_cotizacion_vendedor': 'vendedor1-3', 'fecha_cotizacion': '2026-01-23 18:43 UTC'}
INFO:     127.0.0.1:65269 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:58820 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [12680]
Could not find platform independent libraries <prefix>
WARNING:  WatchFiles detected changes in 'app\routes\pdf.py'. Reloading...
 INFO:     Started server process [11952]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 132, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 701, in lifespan
    await receive()
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

Could not find platform independent libraries <prefix>
INFO:     Started server process [6204]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app\routes\pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     Shutting down
INFO:     127.0.0.1:63594 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Waiting for connections to close. (CTRL+C to force quit)
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [6204]
Could not find platform independent libraries <prefix>
INFO:     Started server process [16560]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
ERROR:root:Failed to persist cotizacion record
Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\app\routes\pdf.py", line 49, in generar_pdf_vendedor_endpoint
    cur.execute(
    ~~~~~~~~~~~^
        "INSERT INTO cotizaciones (cliente, vendedor, numero_cliente, numero_vendedor, fecha_cotizacion, payload_json, created_at) VALUES (?, ?, ?, ?, ?, ?, GETDATE())",
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
        ),
        ^^
    )
    ^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 18 for SQL Server][SQL Server]Invalid object name 'cotizaciones'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 18 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO/00003', 'numero_cotizacion_vendedor': 'vendedor1/00004', 'fecha_cotizacion': '2026-01-23 18:46 UTC'}
INFO:     127.0.0.1:63595 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'Scripts\check_cotizaciones.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:53553 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [16560]
Could not find platform independent libraries <prefix>
WARNING:  WatchFiles detected changes in 'Scripts\check_cotizaciones.py', 'Scripts\create_cotizaciones_table.py'. Reloading...
 INFO:     Started server process [26368]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 132, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 701, in lifespan
    await receive()
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

Could not find platform independent libraries <prefix>
INFO:     Started server process [17072]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'Scripts\create_cotizaciones_table.py'. Reloading...
 INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [17072]
Could not find platform independent libraries <prefix>
INFO:     Started server process [22172]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app\routes\pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     Shutting down
INFO:     127.0.0.1:55803 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [22172]
Could not find platform independent libraries <prefix>
INFO:     Started server process [28480]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
ERROR:root:Failed to persist cotizacion record
Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\app\routes\pdf.py", line 49, in generar_pdf_vendedor_endpoint
    cur.execute(
    ~~~~~~~~~~~^
        "INSERT INTO dbo.cotizaciones (cliente, vendedor, numero_cliente, numero_vendedor, fecha_cotizacion, payload_json, created_at) VALUES (?, ?, ?, ?, ?, ?, GETDATE())",
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
        ),
        ^^
    )
    ^
pyodbc.DataError: ('22007', '[22007] [Microsoft][ODBC Driver 18 for SQL Server][SQL Server]Conversion failed when converting date and/or time from character string. (241) (SQLExecDirectW)')
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO/00004', 'numero_cotizacion_vendedor': 'vendedor1/00005', 'fecha_cotizacion': '2026-01-23 18:48 UTC'}
INFO:     127.0.0.1:55804 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\routes\pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:54708 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [28480]
Could not find platform independent libraries <prefix>
WARNING:  WatchFiles detected changes in 'Scripts\check_cotizaciones.py', 'app\routes\pdf.py', 'Scripts\insert_test_cotizacion.py'. Reloading...
 INFO:     Started server process [22816]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 132, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 701, in lifespan
    await receive()
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

Could not find platform independent libraries <prefix>
INFO:     Started server process [12792]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app\routes\pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     Shutting down
INFO:     127.0.0.1:57766 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Waiting for connections to close. (CTRL+C to force quit)
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [12792]
Could not find platform independent libraries <prefix>
WARNING:  WatchFiles detected changes in 'app\routes\pdf.py'. Reloading...
 INFO:     Started server process [14908]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 132, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 701, in lifespan
    await receive()
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

Could not find platform independent libraries <prefix>
INFO:     Started server process [15040]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57776 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=IMSS CENTRO vendedor=vendedor1 numero_cliente=IMSS CENTRO/00005 numero_vendedor=vendedor1/00006
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO/00005', 'numero_cotizacion_vendedor': 'vendedor1/00006', 'fecha_cotizacion': '2026-01-23 18:51 UTC'}
INFO:     127.0.0.1:57777 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\routes\pdf.py'. Reloading...
 INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [15040]
Could not find platform independent libraries <prefix>
WARNING:  WatchFiles detected changes in 'app\main.py', 'app\routes\cotizaciones.py'. Reloading...
 INFO:     Started server process [15784]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 132, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 701, in lifespan
    await receive()
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

Could not find platform independent libraries <prefix>
INFO:     Started server process [7776]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app\routes\pdf.py', 'app\routes\cotizaciones.py', 'app\main.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     Shutting down
INFO:     127.0.0.1:57031 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Waiting for connections to close. (CTRL+C to force quit)
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7776]
Could not find platform independent libraries <prefix>
INFO:     Started server process [24904]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/api/cotizaciones headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57033 - "GET /api/cotizaciones?limit=5 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:61376 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:53506 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:64959 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64959 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64959 - "OPTIONS /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64959 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64959 - "OPTIONS /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64959 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64959 - "OPTIONS /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
INFO:     127.0.0.1:64959 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:53028 - "OPTIONS /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:53028 - "GET /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64880 - "OPTIONS /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64880 - "GET /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64880 - "OPTIONS /api/vendedores?q=ven&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64880 - "GET /api/vendedores?q=ven&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57849 - "OPTIONS /pricing/listas?sku=h HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57849 - "GET /pricing/listas?sku=h HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57849 - "OPTIONS /pricing/listas?sku=hp HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57849 - "GET /pricing/listas?sku=hp HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57849 - "OPTIONS /pricing/listas?sku=hp3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57849 - "GET /pricing/listas?sku=hp3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57849 - "OPTIONS /pricing/listas?sku=hp30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57849 - "GET /pricing/listas?sku=hp30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57849 - "OPTIONS /pricing/listas?sku=HP30B-CTO-03 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57849 - "GET /pricing/listas?sku=HP30B-CTO-03 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56347 - "OPTIONS /cotizacion/pdf HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56347 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [24904]
Could not find platform independent libraries <prefix>
INFO:     Started server process [344]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:59550 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=IMSS CENTRO vendedor=vendedor1 numero_cliente=IMSS CENTRO-00006 numero_vendedor=vendedor1-00008
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO-00006', 'numero_cotizacion_vendedor': 'vendedor1-00008', 'fecha_cotizacion': '2026-01-23 19:28 UTC'}
INFO:     127.0.0.1:59551 - "POST /cotizacion/pdf HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\fastapi\applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    raise exc
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\app\main.py", line 98, in debug_and_metrics_middleware
    response = await call_next(request)  # Llama al siguiente handler
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\app\routes\pdf.py", line 101, in generar_pdf_vendedor_endpoint
    pdf_bytes = generar_pdf_politica_entrega(datos)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\app\pdf\generar_pdf.py", line 169, in generar_pdf_politica_entrega
    needed = row_h + space_needed_for_footer_and_details(max(1, len(datos.get('items', []))))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'space_needed_for_footer_and_details' is not defined
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:59908 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=IMSS CENTRO vendedor=vendedor1 numero_cliente=IMSS CENTRO-00007 numero_vendedor=vendedor1-00009
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO-00007', 'numero_cotizacion_vendedor': 'vendedor1-00009', 'fecha_cotizacion': '2026-01-23 19:29 UTC'}
INFO:     127.0.0.1:59909 - "POST /cotizacion/pdf HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\fastapi\applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    raise exc
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\app\main.py", line 98, in debug_and_metrics_middleware
    response = await call_next(request)  # Llama al siguiente handler
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\fastapi\routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\fastapi\routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\app\routes\pdf.py", line 101, in generar_pdf_vendedor_endpoint
    pdf_bytes = generar_pdf_politica_entrega(datos)
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\app\pdf\generar_pdf.py", line 169, in generar_pdf_politica_entrega
    needed = row_h + space_needed_for_footer_and_details(max(1, len(datos.get('items', []))))
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'space_needed_for_footer_and_details' is not defined
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:54019 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [344]
Could not find platform independent libraries <prefix>
INFO:     Started server process [28780]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=IMSS CENTRO vendedor=vendedor1 numero_cliente=IMSS CENTRO-00008 numero_vendedor=vendedor1-00010
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO-00008', 'numero_cotizacion_vendedor': 'vendedor1-00010', 'fecha_cotizacion': '2026-01-23 19:29 UTC'}
INFO:     127.0.0.1:54020 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:64923 - "GET /health HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [28780]
Could not find platform independent libraries <prefix>
INFO:     Started server process [22396]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:54668 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54668 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54668 - "OPTIONS /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54668 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54668 - "OPTIONS /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54668 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54668 - "OPTIONS /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
INFO:     127.0.0.1:54668 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "OPTIONS /api/clientes?q=PROVECTUS%20MEDICAL&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "GET /api/clientes?q=PROVECTUS%20MEDICAL&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "OPTIONS /api/vendedores?q=C&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "GET /api/vendedores?q=C&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "OPTIONS /api/vendedores?q=Ca&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "GET /api/vendedores?q=Ca&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "OPTIONS /api/vendedores?q=Car&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "GET /api/vendedores?q=Car&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "OPTIONS /api/vendedores?q=Carlos&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "GET /api/vendedores?q=Carlos&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "GET /api/vendedores?q=Carlos&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "OPTIONS /api/vendedores?q=Carlos%20D&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "GET /api/vendedores?q=Carlos%20D&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "OPTIONS /api/vendedores?q=Carlos%20De&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "GET /api/vendedores?q=Carlos%20De&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "OPTIONS /api/vendedores?q=Carlos%20Dehe&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "GET /api/vendedores?q=Carlos%20Dehe&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "OPTIONS /api/vendedores?q=Carlos%20Dehesa&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61125 - "GET /api/vendedores?q=Carlos%20Dehesa&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:52370 - "OPTIONS /pricing/listas?sku=150E+3001-00182-0 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:52370 - "GET /pricing/listas?sku=150E+3001-00182-0 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "OPTIONS /pricing/listas?sku=150E+3001-00182- HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "OPTIONS /pricing/listas?sku=150E+3001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "GET /pricing/listas?sku=150E+3001-00182- HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "GET /pricing/listas?sku=150E+3001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "OPTIONS /pricing/listas?sku=150E3001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "GET /pricing/listas?sku=150E3001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "OPTIONS /pricing/listas?sku=1503001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "GET /pricing/listas?sku=1503001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "OPTIONS /pricing/listas?sku=153001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "GET /pricing/listas?sku=153001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "OPTIONS /pricing/listas?sku=13001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "GET /pricing/listas?sku=13001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "OPTIONS /pricing/listas?sku=3001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "GET /pricing/listas?sku=3001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "OPTIONS /pricing/listas?sku=3001-0018 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "GET /pricing/listas?sku=3001-0018 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "OPTIONS /pricing/listas?sku=3001-001 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "GET /pricing/listas?sku=3001-001 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "OPTIONS /pricing/listas?sku=3001-00 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "GET /pricing/listas?sku=3001-00 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "OPTIONS /pricing/listas?sku=3001-0 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "GET /pricing/listas?sku=3001-0 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "OPTIONS /pricing/listas?sku=3001- HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56632 - "OPTIONS /pricing/listas?sku=3001 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58084 - "OPTIONS /pricing/listas?sku=300 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50662 - "GET /pricing/listas?sku=3001- HTTP/1.1" 200 OK
INFO:     127.0.0.1:58084 - "GET /pricing/listas?sku=300 HTTP/1.1" 200 OK
INFO:     127.0.0.1:56632 - "GET /pricing/listas?sku=3001 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56632 - "OPTIONS /pricing/listas?sku=30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56632 - "GET /pricing/listas?sku=30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56632 - "OPTIONS /pricing/listas?sku=3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56632 - "GET /pricing/listas?sku=3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64862 - "GET /pricing/listas?sku=3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64862 - "GET /pricing/listas?sku=30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64862 - "GET /pricing/listas?sku=300 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64862 - "GET /pricing/listas?sku=3001 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64862 - "GET /pricing/listas?sku=3001- HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55921 - "GET /pricing/listas?sku=3001-0 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55921 - "GET /pricing/listas?sku=3001-00 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55921 - "GET /pricing/listas?sku=3001-001 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55921 - "GET /pricing/listas?sku=3001-0018 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55921 - "GET /pricing/listas?sku=3001-00182 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55921 - "OPTIONS /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55921 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:59069 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57557 - "GET /pricing/listas?sku=300 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57557 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=3001 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=3001- HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57557 - "GET /pricing/listas?sku=3001-0 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57557 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=3001-00 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57557 - "GET /pricing/listas?sku=3001-001 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57557 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57557 - "GET /pricing/listas?sku=3001-0018 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57557 - "OPTIONS /pricing/listas?sku=3001-00183 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57557 - "GET /pricing/listas?sku=3001-00183 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:57557 - "OPTIONS /pricing/listas?sku=3001-00183-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54910 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57557 - "GET /pricing/listas?sku=3001-00183-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60555 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60555 - "GET /pricing/listas?sku=3001-00183-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60648 - "OPTIONS /pricing/listas?sku=I HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60648 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60648 - "GET /pricing/listas?sku=3001-00183-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60648 - "GET /pricing/listas?sku=I HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60648 - "OPTIONS /pricing/listas?sku=IP HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60648 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60648 - "GET /pricing/listas?sku=3001-00183-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60648 - "GET /pricing/listas?sku=IP HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60648 - "OPTIONS /pricing/listas?sku=IPB HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:59371 - "GET /pricing/listas?sku=IPB HTTP/1.1" 200 OK
INFO:     127.0.0.1:64602 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57212 - "GET /pricing/listas?sku=3001-00183-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:59371 - "GET /pricing/listas?sku=IP HTTP/1.1" 200 OK
INFO:     127.0.0.1:57212 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64602 - "GET /pricing/listas?sku=3001-00183-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60308 - "OPTIONS /pricing/listas?sku=IP2 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:59203 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60308 - "GET /pricing/listas?sku=3001-00183-01 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59203 - "GET /pricing/listas?sku=IP2 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:53516 - "OPTIONS /pricing/listas?sku=IP21B-CTO-02 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:53516 - "GET /pricing/listas?sku=3001-00183-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:52385 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
INFO:     127.0.0.1:53516 - "GET /pricing/listas?sku=IP21B-CTO-02 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49670 - "OPTIONS /cotizacion/pdf HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49670 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:54914 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54914 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54914 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54914 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/pendientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/pendientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/procesadas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/procesadas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54914 - "OPTIONS /autorizaciones/pendientes HTTP/1.1" 200 OK
INFO:     127.0.0.1:55015 - "OPTIONS /autorizaciones/procesadas HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/pendientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/pendientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: pendientes | usuario=gercom1 rol=Gerencia_Comercial (normalizado=gerencia_comercial)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: pendientes | usuario=gercom1 rol=Gerencia_Comercial (normalizado=gerencia_comercial)
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=gercom1 rol=Gerencia_Comercial (normalizado=gerencia_comercial)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=gercom1 rol=Gerencia_Comercial (normalizado=gerencia_comercial)
INFO:     127.0.0.1:54914 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/procesadas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/procesadas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: procesadas | usuario=gercom1 rol=Gerencia_Comercial (normalizado=gerencia_comercial)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: procesadas | usuario=gercom1 rol=Gerencia_Comercial (normalizado=gerencia_comercial)
INFO:     127.0.0.1:55015 - "GET /autorizaciones/pendientes HTTP/1.1" 200 OK
INFO:     127.0.0.1:54914 - "GET /autorizaciones/procesadas HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:59514 - "GET /pricing/listas?sku=3001-00183-01 HTTP/1.1" 200 OK
INFO:     127.0.0.1:65397 - "GET /pricing/listas?sku=3001-00182-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:59514 - "GET /pricing/listas?sku=IP21B-CTO-02 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:59785 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [22396]
Could not find platform independent libraries <prefix>
INFO:     Started server process [30400]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:52976 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=IMSS CENTRO vendedor=vendedor1 numero_cliente=IMSS CENTRO-00009 numero_vendedor=vendedor1-00012
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO-00009', 'numero_cotizacion_vendedor': 'vendedor1-00012', 'fecha_cotizacion': '2026-01-23 20:13 UTC'}
INFO:     127.0.0.1:52977 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:56912 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:57008 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:57008 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [30400]
Could not find platform independent libraries <prefix>
INFO:     Started server process [27332]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62228 - "OPTIONS /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62228 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62228 - "OPTIONS /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62228 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62228 - "OPTIONS /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
INFO:     127.0.0.1:62228 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:51635 - "OPTIONS /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:51635 - "GET /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:59087 - "OPTIONS /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:59087 - "GET /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:59087 - "OPTIONS /api/vendedores?q=ven&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:59087 - "GET /api/vendedores?q=ven&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49859 - "OPTIONS /pricing/listas?sku=h HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49859 - "GET /pricing/listas?sku=h HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49859 - "OPTIONS /pricing/listas?sku=hp HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49859 - "GET /pricing/listas?sku=hp HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49859 - "OPTIONS /pricing/listas?sku=hp3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49859 - "GET /pricing/listas?sku=hp3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49859 - "OPTIONS /pricing/listas?sku=hp30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49859 - "GET /pricing/listas?sku=hp30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49859 - "OPTIONS /pricing/listas?sku=HP30B-CTO-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49859 - "GET /pricing/listas?sku=HP30B-CTO-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:64220 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:53163 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:64636 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64636 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64636 - "OPTIONS /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64636 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64636 - "OPTIONS /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64636 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:64636 - "OPTIONS /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
INFO:     127.0.0.1:64636 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:52572 - "OPTIONS /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:52572 - "GET /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56755 - "OPTIONS /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56755 - "GET /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:63568 - "OPTIONS /pricing/listas?sku=1199-00054-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:63568 - "GET /pricing/listas?sku=1199-00054-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56274 - "GET /pricing/listas?sku=1199-00054-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55896 - "OPTIONS /cotizacion/pdf HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55896 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:53141 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [27332]
Could not find platform independent libraries <prefix>
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 INFO:     Started server process [29824]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 132, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 701, in lifespan
    await receive()
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

Could not find platform independent libraries <prefix>
INFO:     Started server process [30380]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49983 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=IMSS CENTRO vendedor=vendedor1 numero_cliente=IMSS CENTRO-00010 numero_vendedor=vendedor1-00014
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO-00010', 'numero_cotizacion_vendedor': 'vendedor1-00014', 'fecha_cotizacion': '2026-01-23 20:29 UTC'}
INFO:     127.0.0.1:49984 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:55026 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [30380]
Could not find platform independent libraries <prefix>
INFO:     Started server process [28272]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=IMSS CENTRO vendedor=vendedor1 numero_cliente=IMSS CENTRO-00011 numero_vendedor=vendedor1-00015
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO-00011', 'numero_cotizacion_vendedor': 'vendedor1-00015', 'fecha_cotizacion': '2026-01-23 20:31 UTC'}
INFO:     127.0.0.1:55027 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:52339 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:51103 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:60373 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:60373 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Shutting down
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60328 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60328 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
INFO:     127.0.0.1:60328 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
INFO:     Waiting for connections to close. (CTRL+C to force quit)
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:60328 - "GET /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [28272]
Could not find platform independent libraries <prefix>
INFO:     Started server process [12344]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61195 - "OPTIONS /api/vendedores?q=ven&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:61195 - "GET /api/vendedores?q=ven&limit=10 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61086 - "GET /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "OPTIONS /pricing/listas?sku=h HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "GET /pricing/listas?sku=h HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "OPTIONS /pricing/listas?sku=ho HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "GET /pricing/listas?sku=ho HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "OPTIONS /pricing/listas?sku=hop HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "GET /pricing/listas?sku=hop HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "GET /pricing/listas?sku=ho HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "GET /pricing/listas?sku=h HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "OPTIONS /pricing/listas?sku=hp HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "GET /pricing/listas?sku=hp HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "OPTIONS /pricing/listas?sku=hp3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "GET /pricing/listas?sku=hp3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "OPTIONS /pricing/listas?sku=hp30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "GET /pricing/listas?sku=hp30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "OPTIONS /pricing/listas?sku=HP30C-CTO-02 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58934 - "GET /pricing/listas?sku=HP30C-CTO-02 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=Cliente 13 (C1013) vendedor=vendedor1 numero_cliente=Cliente 13 (C1013)-00001 numero_vendedor=vendedor1-00016
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': 'HP30C-CTO-02', 'descripcion': 'MP series Accessories Kit, including 1 MP pole clamp,1 MP-81 handle and 1 power cable', 'cantidad': 1, 'precio_maximo': 1808.62, 'precio_maximo_lista': 1808.62, 'precio_vendedor_min': 1446.9, 'monto_propuesto': 1500.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'Cliente 13 (C1013)', 'numero_cotizacion_cliente': 'Cliente 13 (C1013)-00001', 'numero_cotizacion_vendedor': 'vendedor1-00016', 'fecha_cotizacion': '2026-01-23 20:33 UTC'}
INFO:     127.0.0.1:60067 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:65024 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [12344]
Could not find platform independent libraries <prefix>
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 INFO:     Started server process [23476]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 132, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 701, in lifespan
    await receive()
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

Could not find platform independent libraries <prefix>
INFO:     Started server process [29504]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62671 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=IMSS CENTRO vendedor=vendedor1 numero_cliente=IMSS CENTRO-00012 numero_vendedor=vendedor1-00017
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO-00012', 'numero_cotizacion_vendedor': 'vendedor1-00017', 'fecha_cotizacion': '2026-01-23 20:38 UTC'}
INFO:     127.0.0.1:62672 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:51148 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:61469 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:49736 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:49736 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49736 - "OPTIONS /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49736 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49736 - "OPTIONS /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49736 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49736 - "OPTIONS /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
INFO:     127.0.0.1:49736 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49736 - "OPTIONS /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49736 - "GET /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56101 - "OPTIONS /api/vendedores?q=vce&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56101 - "GET /api/vendedores?q=vce&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56101 - "OPTIONS /api/vendedores?q=vcen&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56101 - "GET /api/vendedores?q=vcen&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56101 - "OPTIONS /api/vendedores?q=vc&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56101 - "GET /api/vendedores?q=vc&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56101 - "OPTIONS /api/vendedores?q=v&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:56101 - "GET /api/vendedores?q=v&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58131 - "GET /pricing/listas?sku=h HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58131 - "GET /pricing/listas?sku=hp HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58131 - "GET /pricing/listas?sku=hp3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58131 - "GET /pricing/listas?sku=hp30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:58131 - "GET /pricing/listas?sku=HP30C-CTO-02 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:63460 - "OPTIONS /cotizacion/pdf HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=Cliente 4 (C1004) vendedor=vendedor1 numero_cliente=Cliente 4 (C1004)-00001 numero_vendedor=vendedor1-00018
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': 'HP30C-CTO-02', 'descripcion': 'MP series Accessories Kit, including 1 MP pole clamp,1 MP-81 handle and 1 power cable', 'cantidad': 1, 'precio_maximo': 1808.62, 'precio_maximo_lista': 1808.62, 'precio_vendedor_min': 1446.9, 'monto_propuesto': 1500.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'Cliente 4 (C1004)', 'numero_cotizacion_cliente': 'Cliente 4 (C1004)-00001', 'numero_cotizacion_vendedor': 'vendedor1-00018', 'fecha_cotizacion': '2026-01-23 20:40 UTC'}
INFO:     127.0.0.1:63460 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:55870 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [29504]
Could not find platform independent libraries <prefix>
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 INFO:     Started server process [30644]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 132, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 701, in lifespan
    await receive()
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

Could not find platform independent libraries <prefix>
INFO:     Started server process [30348]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     Shutting down
INFO:     127.0.0.1:55894 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Waiting for connections to close. (CTRL+C to force quit)
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [30348]
Could not find platform independent libraries <prefix>
INFO:     Started server process [16264]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=IMSS CENTRO vendedor=vendedor1 numero_cliente=IMSS CENTRO-00013 numero_vendedor=vendedor1-00019
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO-00013', 'numero_cotizacion_vendedor': 'vendedor1-00019', 'fecha_cotizacion': '2026-01-23 20:43 UTC'}
INFO:     127.0.0.1:55895 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:64799 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:53713 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:50060 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:50060 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50060 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50060 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
INFO:     127.0.0.1:50060 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:50060 - "GET /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "OPTIONS /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "GET /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "OPTIONS /api/vendedores?q=ven&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "GET /api/vendedores?q=ven&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "OPTIONS /pricing/listas?sku=h HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "GET /pricing/listas?sku=h HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "OPTIONS /pricing/listas?sku=hp HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "GET /pricing/listas?sku=hp HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "OPTIONS /pricing/listas?sku=hp3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "GET /pricing/listas?sku=hp3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "OPTIONS /pricing/listas?sku=hp30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "GET /pricing/listas?sku=hp30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "OPTIONS /pricing/listas?sku=HP30B-CTO-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:62359 - "GET /pricing/listas?sku=HP30B-CTO-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=Cliente 12 (C1012) vendedor=vendedor1 numero_cliente=Cliente 12 (C1012)-00001 numero_vendedor=vendedor1-00020
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': 'HP30B-CTO-01', 'descripcion': ' Perfusor con pantalla táctil, compatible con jeringas universales (2ml, 3ml, 5ml, 10ml, 20ml, 30ml, 50/60ml). 1 asa HP-81, 1 bracket HP y 1 cable de alimentación.', 'cantidad': 1, 'precio_maximo': 21445.0, 'precio_maximo_lista': 21445.0, 'precio_vendedor_min': 17156.0, 'monto_propuesto': 18000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'Cliente 12 (C1012)', 'numero_cotizacion_cliente': 'Cliente 12 (C1012)-00001', 'numero_cotizacion_vendedor': 'vendedor1-00020', 'fecha_cotizacion': '2026-01-23 20:46 UTC'}
INFO:     127.0.0.1:62969 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     Shutting down
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:54443 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Waiting for connections to close. (CTRL+C to force quit)
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [16264]
Could not find platform independent libraries <prefix>
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 INFO:     Started server process [30328]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\runners.py", line 132, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\starlette\routing.py", line 701, in lifespan
    await receive()
  File "C:\Users\FernandoOlveraRendon\Documents\Base_Costos\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\FernandoOlveraRendon\AppData\Local\Programs\Python\Python314\Lib\asyncio\queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

Could not find platform independent libraries <prefix>
INFO:     Started server process [20628]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54454 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [20628]
Could not find platform independent libraries <prefix>
INFO:     Started server process [21752]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=IMSS CENTRO vendedor=vendedor1 numero_cliente=IMSS CENTRO-00014 numero_vendedor=vendedor1-00021
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO-00014', 'numero_cotizacion_vendedor': 'vendedor1-00021', 'fecha_cotizacion': '2026-01-23 20:49 UTC'}
INFO:     127.0.0.1:54455 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:53473 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:53473 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/health headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:root:[DEBUG-HEALTH] Iniciando healthcheck. Cadena de conexión: DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost\SQLEXPRESS;DATABASE=BD_Calculo_Costos;Trusted_Connection=yes;TrustServerCertificate=yes;
WARNING:root:[DEBUG-HEALTH] Conexión a BD exitosa.
INFO:     127.0.0.1:55432 - "GET /health HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:55432 - "POST /auth/login HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55432 - "OPTIONS /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/catalog/productos headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55432 - "GET /catalog/productos HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55432 - "OPTIONS /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/me headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55432 - "GET /auth/me HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55432 - "OPTIONS /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/autorizaciones/mis-solicitudes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING: [DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
WARNING:cost_app:[DEBUG-AUTORIZACIONES] Endpoint: mis-solicitudes | usuario=vendedor1 rol=Vendedor (normalizado=vendedor)
INFO:     127.0.0.1:55432 - "GET /autorizaciones/mis-solicitudes HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55432 - "OPTIONS /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/clientes headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:55432 - "GET /api/clientes?q=cli&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "OPTIONS /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "GET /api/vendedores?q=ve&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "OPTIONS /api/vendedores?q=ven&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/api/vendedores headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "GET /api/vendedores?q=ven&limit=10 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "OPTIONS /pricing/listas?sku=h HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "GET /pricing/listas?sku=h HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "OPTIONS /pricing/listas?sku=hp HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "GET /pricing/listas?sku=hp HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "OPTIONS /pricing/listas?sku=hp3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "GET /pricing/listas?sku=hp3 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "OPTIONS /pricing/listas?sku=hp30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "GET /pricing/listas?sku=hp30 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "OPTIONS /pricing/listas?sku=HP30B-CTO-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/pricing/listas headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:54019 - "GET /pricing/listas?sku=HP30B-CTO-01 HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     127.0.0.1:49361 - "OPTIONS /cotizacion/pdf HTTP/1.1" 200 OK
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=Cliente 14 (C1014) vendedor=vendedor1 numero_cliente=Cliente 14 (C1014)-00001 numero_vendedor=vendedor1-00022
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': 'HP30B-CTO-01', 'descripcion': ' Perfusor con pantalla táctil, compatible con jeringas universales (2ml, 3ml, 5ml, 10ml, 20ml, 30ml, 50/60ml). 1 asa HP-81, 1 bracket HP y 1 cable de alimentación.', 'cantidad': 1, 'precio_maximo': 21445.0, 'precio_maximo_lista': 21445.0, 'precio_vendedor_min': 17156.0, 'monto_propuesto': 18000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'Cliente 14 (C1014)', 'numero_cotizacion_cliente': 'Cliente 14 (C1014)-00001', 'numero_cotizacion_vendedor': 'vendedor1-00022', 'fecha_cotizacion': '2026-01-23 21:59 UTC'}
INFO:     127.0.0.1:49361 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
WARNING:cost_app:[DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:auth_debug:Intento de login: username=vendedor1
INFO:auth_debug:Hash en BD: $2b$12$RnLyor.t9SQ19YfyiBJa6OXTqia.aolrkf8N/Aua1wmENnSo0PlEK
INFO:auth_debug:Resultado verify_password: True
INFO:auth_debug:Login exitoso para usuario: vendedor1
INFO:     127.0.0.1:63851 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [21752]
Could not find platform independent libraries <prefix>
INFO:     Started server process [2132]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=IMSS CENTRO vendedor=vendedor1 numero_cliente=IMSS CENTRO-00015 numero_vendedor=vendedor1-00023
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO-00015', 'numero_cotizacion_vendedor': 'vendedor1-00023', 'fecha_cotizacion': '2026-01-23 22:01 UTC'}
INFO:     127.0.0.1:63852 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [2132]
Could not find platform independent libraries <prefix>
INFO:     Started server process [30100]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app\pdf\generar_pdf.py'. Reloading...
 WARNING: [DEBUG-MIDDLEWARE] path=/auth/login headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:     Shutting down
INFO:     127.0.0.1:61661 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     Waiting for connections to close. (CTRL+C to force quit)
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [30100]
Could not find platform independent libraries <prefix>
INFO:     Started server process [14300]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING: [DEBUG-MIDDLEWARE] path=/cotizacion/pdf headers={'authorization': request.headers.get('authorization', None), 'cookie': request.headers.get('cookie', None)}
INFO:root:Inserting cotizacion record: cliente=IMSS CENTRO vendedor=vendedor1 numero_cliente=IMSS CENTRO-00016 numero_vendedor=vendedor1-00024
INFO:root:Cotizacion insert executed, committing
INFO:root:Cotizacion committed
INFO:root:Payload recibido para PDF: {'items': [{'sku': '1199-00055-01', 'descripcion': 'Heater only - test', 'cantidad': 2, 'precio_maximo': None, 'precio_maximo_lista': 5580.86, 'precio_vendedor_min': 10000.0, 'monto_propuesto': 5000.0, 'logo_path': None, 'proveedor': 'Medcaptain', 'origen': 'Importado'}], 'cliente': 'IMSS CENTRO', 'numero_cotizacion_cliente': 'IMSS CENTRO-00016', 'numero_cotizacion_vendedor': 'vendedor1-00024', 'fecha_cotizacion': '2026-01-23 22:03 UTC'}
INFO:     127.0.0.1:61662 - "POST /cotizacion/pdf HTTP/1.1" 200 OK
